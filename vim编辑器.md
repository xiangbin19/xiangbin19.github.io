# vi编辑器(vi系统自带,vim需要下载)

下载vi编辑器

```
yum install -y vim
```

使用方法

```
vi anaconda-ks.cfg
```

![vim键盘图](E:\笔记\images\vim键盘图.jpg)

### 光标跳转

```
光标定位
上下左右：kjhl
#:command:跳转#个字符

单词跳转
w:下个单词的词首
e:下个单词的词尾
b:上个单词的词首
#:command:跳转#个单词

行首行尾的跳转
^:行首(非空白字符)
0:行首
$:行尾

行间移动
G:跳转N行，1G跳转1行
gg:跳转到第1行行首
```

### 进入其他模式

| 命令  | 作用                                         |
| ----- | -------------------------------------------- |
| a     | 进入插入模式，光标停在选中字母后             |
| i     | 进入插入模式，光标停在选中字母的位置         |
| o     | 进入插入模式，光标停在选中一行的下面新建行中 |
| A     | 进入插入模式，光标停在行尾                   |
| :     | 进入末行模式(扩展命令模式)                   |
| v     | 进入可视行模式                               |
| ^v    | 进入可视块模式                               |
| R     | 进入替换模式                                 |
| ESC键 | 退出插入模式                                 |

### 文本编辑(少量)(直接按对应字母的按键)

| 命令 | 作用                                |
| ---- | ----------------------------------- |
| y    | 复制     yy 3yy ygg yG (以行为单位) |
| d    | 剪切     dd 3dd dgg dG (以行为单位) |
| p    | 粘贴                                |
| x    | 删除光标所在的字符                  |
| D    | 从光标处删除到行尾                  |
| u    | 撤销                                |
| ^r   | 重做                                |
| r    | 可以用来修改一个字符                |

### 搜索命令

```
/    /123   /456   
?    ?123   ?456
n:查找上一个匹配
N:查找下一个匹配
```



### 查找替换(:范围 s匹配/old查找/new替换成,没有找到则会报错)

| 命令                     | 作用                                     |
| ------------------------ | ---------------------------------------- |
| :1,5 s/test/file/        | 从1-5行的root 替换为aaron 每行替换第一个 |
| :5,$ s/test/file/        | $表示最后一行                            |
| :1,$ s/test/file//g      | g表示全局                                |
| :% s#/dev/sda#/var/ccc#g | %表示全文                                |
| :,8 s/test/file/         | 从当前行到第8行                          |
| :4,9 s/^#//              | 4-9行的开头#替换为空                     |
| :5,10 s/.*/#&/           | 5-10前加入#字符(.*整行，&引用查找的内容) |

### 保存退出

| 命令 | 作用               |
| ---- | ------------------ |
| :5   | 进入第5行          |
| :w   | 保存               |
| :q   | 退出               |
| :wq  | 保存退出           |
| :w!  | 强制保存           |
| :wq! | 强制保存退出       |
| :x   | 保存并退出    =:wq |
| :X   | 加密文档           |

### 读写另存为

| 命令              | 作用               |
| ----------------- | ------------------ |
| :w                | 保存               |
| :w /tmp/aaa.txt   | 另存为/tmp/aaa.txt |
| :1,3 w /tmp/2.txt | 将1-3行保存到文件  |
| :r /etc/hosts     | 读入文件到当前行后 |
| :5 r /etc/hosts   | 读入文件到第5行后  |

### 设置环境

临时环境

| 命令            | 作用         |
| --------------- | ------------ |
| :set nu         | 显示行号     |
| :set nonu       | 取消显示行号 |
| :set sm         | 括号匹配     |
| :set nosm       | 取消括号匹配 |
| :set ai         | 自动缩进     |
| :set noai       | 禁用自动缩进 |
| :set hlsearch   | 高亮搜索     |
| :set nohlaearch | 禁用高亮搜索 |
| :syntax on      | 语法高亮     |
| :syntax off     | 语法高亮     |
| :set ic         | 忽略大小写   |
| : set noic      | 不忽略大小写 |
| :help           | 获取帮助     |
| :set list       | 显示控制字符 |

永久环境

```
vi /etc/vimrc		影响所有系统用户
vi ~/.vimrc			影响单个用户
```

### 多文件编辑

```
vim -O ls.txt test		同时编辑两个文件
vimdiff /etc/hosts hosts1
```



